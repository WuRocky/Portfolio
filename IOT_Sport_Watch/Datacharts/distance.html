<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8" />
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0" /> -->
    <title>IoT Watch | 你的健康管家</title>


    <!-- bootstrap -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

    <!--- CSS -->
    <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css">
    <!--Google font setting-->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap" rel="stylesheet" />
    <link href="../css/style.css" rel="stylesheet">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <script src="https://cdn.anychart.com/releases/8.8.0/js/anychart-base.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.8.0/js/anychart-data-adapter.min.js"></script>


    <script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.16/vue.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/vue-router/3.0.1/vue-router.min.js'></script>
    <!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/vue/3.0.1/vue.js'></script> -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.js'></script>
    <!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.3.2/chart.min.js'></script>-->
    <script src="https://unpkg.com/vuex@3.6.2/dist/vuex.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.3/socket.io.min.js"></script> -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.3.2/chart.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js'></script>

</head>

<body>
    <!-- <script src="js/data.js"></script> -->
    <!-- bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"
        integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT"
        crossorigin="anonymous"></script>



    <!-- 下面右邊內容 -->
    <!-- <article> -->
    <section>
        <div class="data">
        <!-- <div class="distance-aside"> -->
            <div id="linechart_material" style="margin-right: 0%;"></div>
        </div>



        <!-- 下面左邊內容
        <div class="distance-side">
            <ul class="distance-side-item">
                <li><a href="#">心跳圖</a></li>
                <li><a href="#">速度</a></li>
                <li><a href="distance.html">距離</a></li>
            </ul>
        </div> -->

    </section>





    <script>
        var dt = []
        new Vue({

            el: '#app',
            data: {
                SensorDatas: []//預先建立一個數組，用於存放請求得到的資料
            },
            // created mounted
            created() { //此處用created相當於對前端頁面資料進行初始化
                axios.get("http://34.92.111.145/DataPHP/distance.php").then(res => {  //這裡是ES6的寫法，get請求的地址，是小編自己在網站上存放的php檔案，後面將介紹其編寫，也可以自己定義
                    this.SensorDatas = res.data;//獲取資料
                    //---
                    dt = res.data;
                    // var hr = dt.map(x=>parseInt(x.Heart_Rate))
                    // var ar = hr.map((y,x)=>[x+1,y])
                    // setTimeout(drawChart, 100, ar);
                    var ar1 = dt.map(x => [parseInt(x.id), parseInt(x.distance)])
                    var ar2 = ar1.reverse()
                    setTimeout(drawChart, 100, ar2);
                    //---Stride_Cadence
                    console.log('success');
                    console.log(this.SensorDatas);
                })
            }

        })
    </script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', { 'packages': ['line'] });
        //google.charts.setOnLoadCallback(drawChart);

        function drawChart(ar = null) {
            var data = new google.visualization.DataTable();
            data.addColumn('number', 'Time');
            data.addColumn('number', 'distance');


            data.addRows(ar);

            var options = {
                chart: {
                    title: 'distance',
                },
                width: 800,
                height: 500
            };

            var chart = new google.charts.Line(document.getElementById('linechart_material'));

            chart.draw(data, google.charts.Line.convertOptions(options));
        }
    </script>

</body>

</html>