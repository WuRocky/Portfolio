<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>velocity</title>
</head>
<body>
  <div id="chart_div" style="width: 900px; height: 500px"></div>

  <script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.16/vue.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/vue-router/3.0.1/vue-router.min.js'></script>
  <!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/vue/3.0.1/vue.js'></script> -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.js'></script>
  <!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.3.2/chart.min.js'></script>-->
  <script src="https://unpkg.com/vuex@3.6.2/dist/vuex.js"></script>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.3/socket.io.min.js"></script> -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.3.2/chart.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js'></script>


  <script>
    var dt=[]
    new Vue({

      el: '#app',
      data: {
        SensorDatas: []//預先建立一個數組，用於存放請求得到的資料
      },
      // created mounted
      created(){ //此處用created相當於對前端頁面資料進行初始化
        axios.get("http://34.92.111.145/DataPHP/velocity.php").then(res=>{  //這裡是ES6的寫法，get請求的地址，是小編自己在網站上存放的php檔案，後面將介紹其編寫，也可以自己定義
          this.SensorDatas=res.data;//獲取資料
          //---
          dt=res.data;
          // var hr = dt.map(x=>parseInt(x.Heart_Rate))
          // var ar = hr.map((y,x)=>[x+1,y])
          // setTimeout(drawChart, 100, ar);
          var ar1 = dt.map(x=>[ parseInt(x.id), parseInt(x.Velocity)])
          var ar2 = ar1.reverse()
          setTimeout(drawChart, 100, ar2);
          //---
          console.log('success');
          console.log(this.SensorDatas);
        })
      }

    })
  </script>
  <!-- google chart -->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load('current', {packages: ['corechart', 'line']});
    google.charts.setOnLoadCallback(drawBackgroundColor);

    function drawChart(ar=null) {
      var data = new google.visualization.DataTable();
      data.addColumn('number', 'X');
      data.addColumn('number', 'Velocity');

      data.addRows(ar);

      var options = {
        title: 'Velocity',
        hAxis: {
          title: 'Time (s)'
        },
        vAxis: {
          title: 'Speed (m / s)'
        },
        curveType: 'function'
      };

      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }
  </script>
</body>
</html>
